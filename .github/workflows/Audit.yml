  name: Audit

  on:
    push:
      branches: [main]
    pull_request:
      branches: [main]

  jobs:

    audit:
      runs-on: ubuntu-20.04
  steps:
  - uses: actions/checkout@v4
  - name: Set up Python
    uses: actions/setup-python@v5
    with:
      python-version: '3.x'
  - name: Install dependencies
    run: |
      python -m pip install --upgrade pip
      pip install -r requirements.txt
  - name: Lint with Ruff
    run: |
      pip install ruff
      ruff check --output-format=github .
    continue-on-error: true

  steps:
        - uses: actions/checkout@v4
        - name: Setup Python
          uses: actions/setup-python@v5
          with:
            python-version: ${{ matrix.python }}
        - name: Install tox and any other packages
          run: pip install tox
        - name: Run tox
          # Run tox using the version of Python in `PATH`
          run: tox -e py